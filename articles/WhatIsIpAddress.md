# IPアドレスとは何か？

IPアドレスはネットワークの世界での住所のようなものです。
IPアドレスはプライベートIPアドレスとグローバルIPアドレスの2種類に分類されています。
プライベートIPアドレスはLAN内で一意であることが要求されるIPアドレスであり、端末利用者が端末に自由に割り当てられます。
一方で、グローバルIPアドレスはWAN内で一意であることが要求され、IANAという団体が管理しており、グローバルIPアドレスの利用者はこの団体から割り振られたIPアドレスを使用することになるため、利用者が自由に端末に割り当てることはできません。

プライベートIPアドレスはLAN内のみで有効なIPアドレスなので、プライベートIPアドレスはインターネット上の通信には利用できません。
そのため、プライベートIPアドレスはNATまたはNAPTという技術によって、グローバルIPアドレスに変換され、端末がインターネット上で他の端末と通信できるようになります。
もちろんグローバルIPアドレスからプライベートIPアドレスへのアドレス変換もできなければなりません。
そうでなければ、インターネット上での通信は成立しません。
なぜならインターネット上での通信はLANと別のLANとの間のやり取りであり、
LAN内の端末が持つIPアドレスはプライベートIPアドレスだからです。

プライベートIPアドレスの割り振りの自由度はグローバルIPアドレスのそれと比較すると高いとは言え、一定の規則が設けられています。
プライベートIPアドレスには主に3つのクラスという概念が存在し、各クラスは特定のIPアドレス範囲を持っています。

- クラスA 10.0.0.0 - 10.255.255.255
- クラスB 172.16.0.0 - 172.31.255.255
- クラスC 192.168.0.0 - 192.168.255.255

上記のプライベートIPアドレスにサブネットマスクかCIDRが付与されることでIPアドレスのどの部分が可変かが分かるようになっています。
以下がその例です。

- 10.0.0.0 255.0.0.0
- 10.0.0.0/8

上記の2つの書き方は異なりますが、意味は同じでどちらも第2, 3, 4オクテットが可変であることを示しています。
この場合の使用できるプライベートIPアドレスの範囲はクラスAの通りです。

しかしながらクラスAのアドレスの範囲はこの1通りのみというわけではなく、
上記のものとは異なるサブネットマスク、CIDRの値が与えられることで別の範囲でIPアドレスが割り振られるようにすることもできます。

- 10.0.0.0 255.255.255.0
- 10.0.0.0/24

上の例ではIPアドレスの可変部は第4オクテットだけです。そのため使用可能なIPアドレスの範囲は以下のようになっています。

- 10.0.0.0 - 10.0.0.255

このように0 - 255の256個のアドレスのみが使用可能です。
なぜこんなことをする必要があるのかと思われるかもしれません。
選択肢は多いほうが良いからこんなことは無意味だという人もいるかもしれません。
確かに家庭でのネットワークでこんな面倒なことをする人は滅多にいないでしょう。

しかし、これには理由があります。これは何も使えるIPアドレスの範囲を狭めるためのものではなく、
1つのネットワークをいくつかに分割し、それぞれに別々の役割を与え、一つ一つのネットワークが他のネットワークから隔離されることで情報の拡散を防止したり、
1つのネットワークで何らかの不具合が発生してもそれが他のネットワークまでは広がらないようにできるという利点があります。

例えば、10.0.0.0/8のネットワークを以下のように分割し、各ネットワークに任意の役割を与えることができます。

- 10.0.1.0/24 総務部のネットワーク
- 10.0.2.0/24 開発ネットワーク
- 10.0.3.0/24 検証環境のネットワーク

他にも多くのネットワークを作り出せます。
仮に総務部のネットワークが何らかのウィルスに感染したとしても影響範囲を総務部のネットワーク内に留めることができます。

このようにサブネットマスク、CIDRの値を設定することにはしっかりと意味があるとわかると思います。